route "/" do
  data:
    title: "Welcome"

  astro:
    tag: Layout
    children:
      - tag: h1
        content: title
      - tag: form
        props:
          @submit: "/api/login"
        children:
          - tag: input
            props:
              name: "email"
          - tag: button
            content: "Login"

server:
  post "/api/login" do
    return json({ ok: true, name: body.email })

db:
  table users:
    id int primary
    email string
